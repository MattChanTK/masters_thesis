\chapter{Validations} \label{chap:validations}

In this chapter, we demonstrate the behaviours emerged from running Curiosity-Based Learning Algorithm (CBLA) on an interactive art sculpture. We first investigated the behaviour of the simplest form of a CBLA system, one with a single node with one sensor and one actuator. This allows us to visualize the exploration pattern of the CBLA engine in two- or three-dimensional space. Then, we applied the algorithm on a small multi-node system with shared input variables. We observed its self-learning behaviours as well as the way it responds to external disturbances. After that, we constructed a small scale interactive sculptural system in the form of four-clusters test bed. In additional to shared inputs, virtual inputs were introduced to connect the different nodes. We investigated on the different emergent behaviours as results of different connection schemes. Finally, we conducted a formal user study using the test bed. Participants were invited to interact with the sculpture and report on their interest levels. The observations collected in this user study enabled us to understand the relationship between the participants' behaviours and engagement level under different conditions as well as different configurations of the CBLA system.

%TODO add an artificial data section

\section[Single Node Experiment]
{Single Node Experiment
	\footnote{An early version of this chapter has been submitted to IROS 2015 \cite{Chan2015} }}\label{sec:single-node}

Although the CBLA was designed for a distributed system with multiple nodes, it might not be easy to visualize the modelling process due to the high-dimensionality of the data and the models. To demonstrate the action selection pattern and the learning process, the CBLA was first tested on a simple toy example which is easily visualizable in 3-dimensional space. In this experiment, idle mode was disabled as the main objective was to observe and verify the exploration pattern of the CBLA. 

\subsection{Set-up}
The system in this experiment consists of a Light node, which is a single-input, single-output system. For the single-input system, S is a scalar value that represents the measurement from an ambient light sensor. It was recorded directly as a 12-bit value. M corresponds to the voltage duty cycle supplied to the LED, ranging from 0 to 100, with 0 being completely off (0V) and 100 being the maximum allowable voltage (~4.7V). The loop period is the time between each actuation and was set to 0.05s.

\subsection{Procedures and Expected Results}
In this experiment, the system ran for 2500 time steps without any external interference. 
Based on the reward structure, which favours learning first the most predictable regions of the state-space, the CBLA is expected to first explore the regions of the sensorimotor space that have low variance. Once the model in that region is learnt, it should move onto areas with higher variance.

\subsection{Results}

\Cref{fig:LED_ALS Model Evolution} shows the evolution of the prediction model and actual exemplars over time. As expected, the CBLA first selects actions associated with lower LED output levels, as this leads to measurements in the low variance regions. Over time, once the model in the low variance region is acquired, it moves toward higher brightness regions. \Cref{fig:LED_ALS Action Selection} shows that the best action and the actual selected action were completely random at first. The system then focused on the easy-to-learn areas in the lower brightness level. After that, it moved toward the higher brightness and harder-to-learn regions when it hadn't seen much improvement in the low brightness regions. After some exploration of the bright regions, prediction error is reduced in those regions, and the system returns again to explore the low-brightness region.  The resulting pattern of activation is interesting visually, as it results in non-random activations that have the potential to convey a notion of intent to the viewer. 
 
\begin{figure} [!htbp]
	\centering
	\includegraphics[width=0.95\textwidth]{"fig/validations/LED_ALS Model Evolution"}
	\caption[Evolution of the prediction models for the single node experiment]{Evolution of the prediction models for the single node experiment. Each point represents an exemplar. Points with the same colour are in the same region and the black lines are the cross-section of the linear models at S(t) = 0. The regions are numbered in the order that they were created. }
	\label{fig:LED_ALS Model Evolution}
\end{figure}

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/LED_ALS Action Selection"}
	\caption[Action vs Time Graph for the single node experiment]{Action vs Time Graph for the single node experiment; the y-axis is the output of the LED M(t) and the x-axis is the time step. Orange dots represent the actual action taken and blue dots represent the best action given the sensorimotor context. The best action is defined as the action with the highest action value given the current state. Non-best actions are selected occasionally in order to explore the state space.}
	\label{fig:LED_ALS Action Selection}
\end{figure}

\Cref{fig:LED_ALS Mean Error vs Time} shows the mean error vs. time graph. Here we see that the prediction error quickly drops to a relatively low level. To improve its prediction further, the state-space was split into regions with low and high error. This allows the Region 1 (low variance region) to further reduce its prediction error.

\begin{figure}  [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/LED_ALS Mean Error vs Time"}
	\caption[Mean error vs time graph for the single node experiment]{Mean error vs time graph for the single node experiment. Each colour represents a region and the colour code corresponds to final prediction model graph in Figure \ref{fig:LED_ALS Model Evolution} }
	\label{fig:LED_ALS Mean Error vs Time}
\end{figure}


In \Cref{fig:LED_ALS Action Value vs Time}, one can that see the action value of a region does not stay constant. This shows that as the prediction improves, the value of actions in that region decreases over time as the region becomes “learnt” and further learning potential decreases. 

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/LED_ALS Action Value vs Time"}
	\caption[Action value vs time graph for the single node experiment]{Action value vs time graph for the single node experiment. Each colour represents a region and the colour code corresponds to final prediction model graph in Figure \ref{fig:LED_ALS Model Evolution} }
	\label{fig:LED_ALS Action Value vs Time}
\end{figure}

\FloatBarrier

\section[Multi-Node Experiment]
{Multi-Node Experiment
	\footnote{An early version of this chapter has been submitted to IROS 2015 \cite{Chan2015} }}\label{sec:multi-node}


In this Section, we describe a demonstration of an integrated system consisting of multiple CBLA Nodes. In addition, in this experiment, threshold-based Idle Mode was introduced. When the knowledge gain potential is low, a Node would enter Idle Mode and turn off its actuators. The behaviours of the system during self learning period and its response to external interference was examined.

\subsection{Set-up}
The Light node was the same as in \Cref{sec:single-node}, with the addition of the shared IR proximity sensor. For the Fin node, the input variables are the average accelerometer readings of the three axes, and the shared IR proximity sensor reading over the 12.5s loop period; the output variable is the action of the Fin. There are four discrete actions: rest (0), lower to the right (1), lower to the left (2), and lower to the centre (3). Note that in this set up, the two types of nodes run with different loop periods, but coupling between them is accomplished through the shared IR sensor, which measures proximity as a 12-bit value. Note that in this experiment all four nodes share one single IR sensor. The set-up of the experiment is shown in \Cref{fig:Single_Cluster Set-up}.

\begin{figure} [!htbp]
	\centering
	\includegraphics[height=0.8\textheight]{"fig/validations/Single_Cluster Set-up"}
	\caption[Photograph of the Multi-Node Experiment set-up]{The set-up of the Multi-Node Experiment. The Light Node is shaded light blue, and the three Fin Nodes are shaded red, blue, and yellow. All four nodes share an IR proximity sensor in the purple circle.}
	\label{fig:Single_Cluster Set-up}
\end{figure}

\subsection{Procedures and Expected Results}
The system runs undisturbed until, after some initial learning, all of the nodes enter Idle Mode.  During this time, the IR proximity sensor pointed toward an empty area. Afterwards, a participant enters into the sculpture space in an area detectable by the IR proximity sensor. The system should then exit idle mode and begin learning the changed model introduced by the change in the environment.  Since the IR sensor is shared by all nodes, they are all expected to recognize the change and exit idle mode at approximately the same time. 

\subsection{Results}

\Cref{fig:Single_Cluster Action Value Vs Time} shows how the action values change over time for each of the nodes. The coloured lines represent the action values and each colour represents a region. The blue dots underneath the plot indicate when the node was in idle mode.

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/Single_Cluster Action Value Vs Time"}
	\caption[Action value vs time graph for the Single Cluster Experiment]{Action-value vs Time graph for the Light node (a) and the three Fin nodes (b), (c), (d).}
	\label{fig:Single_Cluster Action Value Vs Time}
\end{figure}

All the nodes first started learning their own models and entered idle mode. At around 390s, a human participant walked in front of the IR proximity sensor. This triggered a large reduction in action value at first, due to an increase in prediction error. However, as more data was collected, the action values for all four nodes quickly jumped up. This prompted the nodes to exit idle mode and begin generating actions to learn the model. After a period of readjustment, all four nodes re-entered idle mode after the new environment is learnt. 

\subsection{Discussion}

From \Cref{fig:Single_Cluster Action Value Vs Time}, one can see that the Light Node and the three Fin Nodes reacted to the environmental change nearly simultaneously. They exited the idle state and shifted to more exploratory actuation patterns. This showed that the shared sensor input variable was able link the CBLA engines together, even though they run independently at different frequencies. This experiment demonstrates that the reaction of the system to the changed environmental conditions creates an interaction with the visitor without any explicitly pre-programmed behaviours. The system appears to respond to the participant and their action, as its internal model of the environment cannot predict the behaviour of the participant. 

The system's intrinsic curiosity drives itself to perform actions and elicit responses from this new environment with the participant's presence, and update its prediction model. We anticipate that the visitors will find such behaviours engaging as the visitors can recognize that the sculpture is responding to their presence and action but they would not be able to easily predict how it might respond. This quality provides the CBLA System the potential to be more life-like than a prescripted or a random system. 


\section{Multi-Cluster Test Bed}\label{sec:multi-cluster-test-bed}

An experimental test bed was built to investigate how user interact with the a CBLA system. This is a small scale four-cluster test bed that resembles a typical interactive sculpture produced by the Philip Beesley Architect Inc. (PBAI) and it was used in the experiments described in \Cref{sec:multi-cluster-experiment,sec:user-study}. A photograph of the complete test bed is shown in \Cref{fig:cbla-test-bed photo 2}

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/cbla-test-bed photo 2"}
	\caption[Photograph of the multi-cluster test bed]{Photograph of the multi-cluster test bed when actuated. The names of the Clusters from left to right are: Cluster 1 ($C1$), Cluster 2 ($C2$), Cluster 3 ($C3$), and Cluster 4 ($C4$).}
	\label{fig:cbla-test-bed photo 2}
\end{figure}


\subsection{Electronic Components}

A Light Unit is made up of one high-power LED and one ambient light sensor. The high-power LED is mounted on top of a flask containing coloured liquid. The ambient light sensor is mount on the side of the flask under the LED. This allows the ambient light sensor the measure the intensity of the light emitted by the LED. 

A Fin Unit is made up of two SMA wires, a pair of LED, a vibration motor, a 3-axis accelerometer, and two IR proximity sensors. The two SMA wires pull on two levers that moves a Fin, which is a mechanism made of soft plastic that curls up. On the Fin, an IR proximity and an accelerometer was mounted at around midway between the tip to the root of the Fin. at the bottom of the Fin, a vibration motor, a pair of LEDs, and an IR proximity sensor is mounted the middle of two frond-like objects. 

\subsection{Device Nodes}

Device Nodes further abstract the Output and Input Nodes to enable higher level functionality. This frees the CBLA Nodes from managing the constraints imposed by the physical attributes of the actuators and sensors. 

\subsubsection{SMA Controller Node}

In the experiment described in \Cref{sec:multi-node}, the SMA wires were only operated in fully off or fully on mode. This means that a Fin with two SMA wires can only have four possibles states. In addition, each actuation must be a cycle since the SMA wires cannot be fully actuated at 5V for more than 2s. Empirically, we determined that the cooling period takes around 10s. This means that the loop period for a CBLA Node cannot be lower than 12s since it does not have the freedom to actuate the SMA wires again during the cooling period. These restrictions are problematics during interaction with the users since the learning period and response latency would likely take longer than what a normal visitor would spend in front of a section of a sculpture. In addition, only a very coarse model can be made with only four possible that the Fin can choose from. This means that the Fin Node will likely be very unresponsive since the variance for each kind of action is likely to be very high.

Thus, for this experiment, a position controller is needed to enable the SMA wire to hold its length while keeping the SMA wire at a safe temperature. The length of an SMA wire is related to the temperature. This system passes current through the SMA wire to generate the heat. Therefore to maintain a position, the controller needs to adjust the output voltage to a level that can maintain the desired temperature. This can reduce the loop period as the SMA wires no longer need to cool down after selecting each action. In addition, the number of actions is no longer limited to four as the Node can now select any value between fully off and fully on.However, it is difficult to attach a temperature sensor on the SMA wire. Instead of using a feedback controller, only an open-loop controller with a model that estimates the temperature of the SMA wire is used.

This controller essentially produces a control signal that allows the SMA wire to quickly reaches its desired temperature by setting the output voltage very high. It then gradually lower the voltage as the SMA wire reaches its desired position according to an internal model. This model starts with the intuition that the temperature of the wire increases when the rate of heating is larger than the rate of cooling. The rate of heating is related to the voltage across the wire. On the other hand, the rate of cooling is related to the temperature of the wire as it is mainly driven the wire's own natural convection. 

We first calculate the heat transfer rate as a result of the current passing through the SMA wire. According to Joule's Law of Heating \cite{JouleHeating},
\begin{equation}
	H = \frac{1}{J}i^2 \cdot r \cdot t
\end{equation}
where $H$ is heat generated in Joule; $J$ is a constant known as the Joule's mechanical equivalent of heat; $i$ is the current in ampere; $r$ is the resistance of the wire in Ohm; and $t$ is time is second.

We can simplify the equation by lumping $\frac{1}{J}\cdot r$ together and treating it as one constant $k_{heating}$
In our case, although $r$ is not actually constant since the resistance of the SMA wire decreases as it shortens \cite{FlexinolTechSpecs}, the effect is sufficiently small that we can ignore. Therefore, we get,

\begin{equation}\label{eqn:simple-joule-heating}
H = k_{heating} \cdot i^2 \cdot t
\end{equation}

Taking the derivative of Equation \eqref{eqn:simple-joule-heating}, we can get the heat transfer rate $q$ in Watt due to the electrical current at $i$ amperes. 

\begin{equation}\label{eqn:heating-rate-i}
	q_1 = \frac{dH}{dt} = k_{heating} \cdot i^2
\end{equation}
where $q_1$ is the heat transfer rate $q$ in Watt.

According to Ohm's Law, 
\begin{equation}\label{eqn:ohm's law}
	i = \frac{v}{r}
\end{equation}
where $i$ is the current in ampere; $v$ is the voltage in volt; and $r$ is resistance in ohm.

Substituting \eqref{eqn:ohm's law} into \eqref{eqn:heating-rate-i}, we get

\begin{equation}\label{eqn:heating-rate-v}
q_1 = k_{heating} \cdot v^2
\end{equation}

Since our control signal $x$ is proportional to the voltage, it can simply be absorb into the $k_{heating}$ constant as 

\begin{equation}\label{eqn:heating-rate-x}
q_1 = k_{heating} \cdot x^2
\end{equation}

Then, we calculate the heat loss rate due to natural convection of the SMA wire. According to the Newton's Law of Cooling \cite{NewtonLawOfCooling}, 

\begin{equation}\label{eqn:cooling-newton-law}
q_2 = h_c \cdot A \cdot dT
\end{equation}
where $q_2$ is the heat transfer rate in Watt ($W$); $h_c$ is the convective heat transfer coefficient in $W/(m^2K)$; A is the area of the heat transfer surface; and $dT$ is the temperature difference between the air and the surface in Kelvin ($K$).

If we approximate $h_c$, $A$, and the air temperature $T_{air}$ as constant, we get
\begin{subequations}\label{eqn:cooling-newton-law-simple}
	\begin{flalign}
		q_2 &= k_{cooling} \cdot (T - T_{air}) \\
			&= k_{cooling} \cdot T - k_{cooling} \cdot T_{air} \\
			&= k_{cooling} \cdot T + k_{air}\label{eqn:cooling-newton-law-simple-end}
	\end{flalign}
\end{subequations}
where $q_2$ is the heat transfer rate in Watt ($W$); $k_{cooling}$ and $k_{air}$ are constants; and $T$ is the temperature of the SMA wire in Kelvin ($K$).

Combining \eqref{eqn:heating-rate-x} and \eqref{eqn:cooling-newton-law-simple-end}, we get the total heat transfer rate as 
\begin{subequations}
	\begin{flalign}
		q &= q_1 - q_2 \\
		  &= k_{heating} \cdot x^2 - k_{cooling} \cdot T + k_{air}\label{eqn:total_heat}
	\end{flalign}
\end{subequations}

We can then calculate the kinetic energy generated  during time interval $\Delta t$ by multiplying \eqref{eqn:total_heat} by $\Delta t$.
\begin{equation}
	KE =  (k_{heating} \cdot x^2 - k_{cooling} \cdot T + k_{air}) \cdot \Delta t \label{eqn:total_KE}
\end{equation}

Since temperature is directly proportional to kinetic energy, the proportionality constant can be absorbed into $k_{heating}$, $k_{cooling}$, and $ k_{air}$ as well. 
\begin{equation}
	\Delta T =  (k_{heating} \cdot x^2 - k_{cooling} \cdot T  + k_{air}) \cdot \Delta t\label{eqn:delta_T}
\end{equation}

Therefore, at each time step $\Delta t$, the temperature is incremented by $\Delta T$.  
\begin{subequations}
	\begin{flalign}
	T_{t+1} &=  T_{t} + \Delta T \\
		    &=  T_{t} + k_{heating} \cdot x^2 - k_{cooling} \cdot T_{t}  + k_{air}\label{eqn:sma-controller-model}
	\end{flalign}
\end{subequations}

In this formulation the actual unit of the temperature is not important. Instead, we define 0 as the temperature when the SMA wire is the longest and 1 as the temperature when the SMA wire is the shortest. The steady state temperature of the SMA wire should be 0 when the input $x$ is 0. If we substitute 0 into $T_{t+1}$, $T_{t}$, and $x$ into \eqref{eqn:sma-controller-model}, we get $k_{air} = 0$. 

\begin{equation}\label{eqn:sma-controller-model-1}
T_{t+1} =  T_{t} + k_{heating} \cdot x^2 - k_{cooling} \cdot T_{t}
\end{equation}

From SMA wire's technical specifications\cite{FlexinolTechSpecs}, we identify the maximum current that the SMA wire can operate continuously and indefinitely without damage. Using that value, we determine the maximum continuous output level $x_c$. This means that even when the desired temperature $T$ is equal to 1, at steady-state, $x$ should be below $x_c$. This means, 
\begin{subequations}
	\begin{flalign}
	 0 &= k_{heating} \cdot x_c^2 - k_{cooling} \\
	 k_{cooling} &=  k_{heating} \cdot x_c^2\label{eqn:k_cooling}
	\end{flalign}
\end{subequations}

The SMA wires would not be damaged due to over-heating as long as the relationship in \eqref{eqn:k_cooling} holds. In fact, we can set $k_{heating}$ to 1 arbitrarily to simplify \eqref{eqn:sma-controller-model-1} further. At the end, we get
\begin{equation}\label{eqn:sma-controller-model-2}
	T_{t+1} =  T_{t} + x^2 -  x_c^2 \cdot T_{t}
\end{equation}
as the temperature model of the SMA Controller.

We then apply and tune a PI controller on this temperature model to track a desired temperature as shown in \Cref{fig:SMA Controller}. A Node can specifies a desired temperature $T_{desired}$ between 0 and 1 and the SMA Controller tracks this temperature within its internal temperature model. The control signal generated by this PI Controller is applied to the actual SMA wire in parallel. 

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/SMA Controller"}
	\caption[Block diagram of the SMA Controller]{Block diagram of the SMA Controller. }
	\label{fig:SMA Controller}
\end{figure}

Due to the lack of feedback control and the simplification of the model, the accuracy of this controller is relatively low. However, the main purpose of this SMA Controller is to enable the CBLA Node to hold the Fin at a particular position within its range. This allows the CBLA Engine run at a higher rate and expands its number of possible actions. 


\subsubsection{LED Driver Node}

If a CBLA Node controls an LED directly, any change in brightness would be set instantly. The LED may appear to be flicking and flashing erratically to the viewer as it rapidly jump between brightness levels. To improve the aesthetic, an LED Driver that brightens and dims the light gradually was introduce. However, the relationship between brightness level of a typical LED and the input voltage is non-linear \cite{CreeLEDDatasheet}. At low voltage levels, the brightness increases rapidly as input voltage increases. At higher voltage levels, larger increase in voltage is needed to have increase brightness at the same rate. In order for the change in brightness to appear more linear, \eqref{eqn:led-driver discrete update} is used to control the output level of the LED. 

At every time step, 
\begin{equation}\label{eqn:led-driver discrete update}
	x_{t+1} =
	\begin{cases}
		0.00001 & \text{if } x_{t} == 0 \text{ and }  x_{desired} > 0 \\
		x_{t} + k \cdot x_{t}, & \text{if } x_{t} < x_{desired} \\
		x_{t} - k \cdot x_{t}, & \text{if } x_{t} > x_{desired} \\
		x_{t}, & \text{otherwise}
	\end{cases} 
\end{equation}
where $x_{t+1}$ is the output level in the next time step; $x_t$ is the current output level; $x_{desired}$ is the desired output level; and $k$ is a constant that determines speed of change in brightness. $x$ must be between 0 and 1. 

To show that \eqref{eqn:led-driver discrete update} matches the profile of an LED, its second and third cases are formulated as a first-order ODE. 

\begin{equation}\label{eqn:led-driver ODE}
	 \frac{dx(t)}{dt} \pm k \cdot x(t)  = 0
\end{equation}

Solving \eqref{eqn:led-driver ODE}, we get 
\begin{equation}\label{eqn:led-driver ODE_solved}
	x(t) = x(0) \cdot e^k \cdot e^{\mp k \cdot t}
\end{equation}
where $x(0)$ is the initial output level when the desired output level is changed.

\eqref{eqn:led-driver ODE_solved} is an exponential function which increases the output level of the LED at a faster rate at higher brightness region. 

\subsection{Isolated CBLA Nodes}\label{sec:isolated-cbla-node}

Each Isolated CBLA Node is associated with one actuator. A CBLA system is constructed by linking these Isolated CBLA Nodes through virtual inputs. In this test bed, three main types of Isolated CBLA Node exists: Half-Fin Node, Light Node, and Reflex Node.
 
\Cref{fig:Isolated CBLA Nodes} presents the make up of the different Isolated CBLA Nodes in a cluster. Two Half-Fin Nodes control the bending of a Fin through their respective SMA controllers (Fx.SMA-L and Fx.SMA-R). The pair of Half-Fin Nodes share a Fin-mounted IR proximity sensor (Fx.IR-F), and the 3 axes of the accelerometer (Fx.ACC). A Light Node controls the brightness of a high-power LED through a LED driver (Lx.LED) and its sensory space consists of an ambient light sensor (Lx.ALS). There are two types of Reflex Nodes, one is associated with a pair of LEDs (Fx.RFX-L), and one is associated with a vibration motor (Fx.RFX-M). However, they are both being controlled through an LED Driver. In their sensory space, they share one bottom-mounted IR proximity sensor (Fx.IR-S). 

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/Isolated CBLA Nodes"}
	\caption[Make up of a cluster of Isolated CBLA Nodes]{Make up of a cluster of Isolated CBLA Nodes. Half-Fin Nodes are shown in red; Light Nodes are shown in orange; and Reflex Nodes are shown in blue.}
	\label{fig:Isolated CBLA Nodes}
\end{figure}


\subsection{Network Configurations}

Isolated CBLA Nodes described in \Cref{sec:isolated-cbla-node} are connected each other via virtual input. In essence, output of a CBLA Node is treated as an input variable to other Nodes, much like input variables associated with their own sensors. This creates a interconnected network of CBLA Nodes that span the entire sculpture. This allows information regarding the external environment to travel through the sculpture. 

Different network configurations produce different system behaviours. Here we investigate two types of network configurations which we called Spatial Mode and Random Mode. For fair comparison, the two modes have exactly 111 links. In addition, each node is linked to at least one other node via virtual inputs. 

\subsubsection{Spatial Mode}

In Spatial Mode, CBLA Nodes are linked based on their spatial proximity. \Cref{fig:Spatial Local Modes} shows the connections among Nodes within a cluster. Neighbouring Nodes are connected via a directional link. Two connected Nodes take each other's output as input variable. Nodes in neighbouring clusters that are in close proximity are linked via unidirectional links as shown in \Cref{fig:Spatial Global Mode}. The circular connections that daisy-chain the four clusters allow information to spread throughout the test bed. 

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/Spatial Local Mode"}
	\caption[Connectivity graph within a cluster in Spatial Mode]{Connectivity graph within a cluster in Spatial Mode. Each directional green arrow represents a pair of input links. Two connected Nodes take each other's output as input variable. Note that each directional link is counted as two links.}
	\label{fig:Spatial Local Modes}
\end{figure}

\begin{figure} [!htbp]
	\centering
	\includegraphics[height=0.85 \textheight]{"fig/validations/Spatial Global Mode"}
	\caption[Connectivity graph of the entire test bed in Spatial Mode]{Connectivity graph of the entire test bed in Spatial Mode. Each blue unidirectional arrow represent an input link. The output of the Node at the origin of an arrow is fed into the Node that it is pointing toward as input variable.}
	\label{fig:Spatial Global Mode}
\end{figure}

Under this configuration, Nodes' responses to external disturbances or environmental changes are expected to concentrate close to the source, and spread to other Nodes gradually. 

\subsubsection{Random Mode}

In Random Mode, CBLA Nodes are linked to other CBLA Nodes randomly. This means that the output of a Node might be fed into another Node that is on the other side of the sculpture. Since there are 60 Nodes and 111 links are required, the algorithm links the output of each Node to another random Node to ensure that each Node has an effect in the overall system. Then, the algorithm pick 51 unique Nodes at random and link each of them another random Node. This ensures that the state space of each Node are relatively even. 

The specific random configuration is generated at run-time and it is different every time. In addition, it should be noted that this method does not guarantee that there would not be any disparate sub-networks. It is possible that a set of Node is completely isolated from another set of Node under this network configuration scheme.

\subsection{Prescripted Behaviours}

For the purpose of comparing between CBLA and prescripted behaviours, each CBLA Node has a Prescripted Engine in addition to the CBLA Engine. This allow us to quickly switch between the two kinds of behaviours during the user study described in \Cref{sec:user-study}. Although the two engines are both associated with the same actuators, they may have different sensors in its sensory space. 

The overall system behaviour can be described without going into the implementation details of each Prescripted Engine.

For the Fin mechanism, when its Fin-mounted IR proximity sensor detects an object, it bends down toward the direction of a neighbouring bottom-mounted IR proximity sensor that has also detected an object. If both or neither of IR proximity sensors has detected an object, it simply bends straight down. It returns to upright rest position when its Fin-mounted IR proximity sensor does not detect an object in its proximity.

For the high-power LEDs its output ramps up and down continuously when its corresponding Fin-mounted IR proximity sensor has detected an object. It then dims gradually when the object is removed.

For the reflex vibration motor or LEDs, its output also ramps up and down continuously when its corresponding bottom-mounted IR proximity sensor has detected an object. It then ramps down gradually when the object is removed.

An additional virtual node is added to provide cluster-level group behaviours.This node counts the number of outputs within its cluster that are active. It then determines a probability of random activation by mapping this count to a Gaussian function. The Fin mechanism or the high-power LED may turn on at random based on this probability. Using a Gaussian function allows the probability to random activation to increase when a number of outputs are activated. However, when too many outputs are activated, this probability decreases and make random activation less probable. 


\section{Multi-Cluster Experiment}\label{sec:multi-cluster-experiment}

This experiment investigates the behaviours of the CBLA system on a small scale four-cluster test bed described in \Cref{sec:multi-cluster-test-bed}. The test bed has two different network configurations: Spatial Mode, and Random Mode. Under different network configurations, the CBLA system is expected to behave differently. We hypothesize that users will find activations closer to them more relevant, and hence more interesting. We devised a metric to quantify this proximal activation. The configuration with higher proximal activation is then used for subsequent user study. 

\subsection{Set-up}\label{sec:multi-cluster-setup}

The multi-cluster test bed described in \Cref{sec:multi-cluster-test-bed} is used for this experiment. Since the goal of this experiment is to examine the behaviours of the CBLA system, the Prescripted Engine is not used in this experiment. In addition, within the CBLA Engine, a sigmoid function based idle mode as described in \Cref{eqn:map_sigmoid} is used.

\subsection{Procedures}

The CBLA system first starts at blank state without any preexisting exemplars or prediction models. It operates without any external interferences for five minutes or 300 seconds. After that an object is placed in front of the IR proximity sensor C3.F2.IR-S (refer to \Cref{fig:Spatial Global Mode}) for approximately 30 seconds. Then, the object is removed and the experiment continues on for another 2 minutes or 120 seconds before terminating the program.

This procedure was repeated three times for both Spatial Mode and Random Mode.

\subsection{Expected Results}

The level of output is referred to as activation. All clusters are expected to have approximate the same level of activation during the initial learning period. After that, the amount of activation would reduced as the knowledge gain potential decreases. 

For Spatial Mode, it is expected that the activation as a result of the trigger at 300s point will be concentrated around the source which is Cluster 3 ($C3$). On the other hand, for Random Mode, since Nodes are connected randomly, activation will be more spread out and no one cluster should have a larger than average level of activation. To quantify the activation level, we devised a metric that evaluate the average total activation and average cluster activation.

%TODO add calculation the processes the data

The total activation level at time interval $t$ is the average output level of all CBLA Nodes at time interval $t$. It can be calculated as followed:
 
\begin{equation}\label{eqn:total_activation}
	a_t = \frac{1}{N} \sum_{j=0}^{N} \overline{m_{jt}} \text{, for all Node $j$}
\end{equation}
where $a_t$ is the total activation level at time interval $t$; $N$ is the total number of CBLA Nodes; $\overline{m_{jt}}$ is the average output value of CBLA Node $j$ at time interval $t$.

We are interested in the total activation level during period immediately after the trigger was applied. Therefore, we computer average total activation between the time of the trigger $t_{trig}$, and the end of the readjustment period $t_{readj}$ as followed.
\begin{equation}\label{eqn:average_total_activation}
\overline{a} = \frac{1}{| \left\{ a_{T_{trig}}, ... , a_{T_{readj}} \right\}|} \sum_{t=T_{trig}}^{T_{readj}} a_{t}
\end{equation}
where $\overline{a}$ is the average total activation from $T_{trig}$ to $T_{readj}$; and $| \left\{ a_{T_{trig}}, ..., a_{T_{readj}} \right\}|$ is the number of time intervals between $T_{trig}$ and $T_{readj}$.

By looking at the cluster activation level, we can determine if the concentration of activation is what we expect. 
To find the cluster activation level, we apply \eqref{eqn:total_activation}, but only for the CBLA Nodes within a particular cluster.
\begin{equation}\label{eqn:cluster_activation}
	a_{ct} = \frac{1}{N_c} \sum_{j=0}^{N_c} \overline{m_{jt}} \text{, for all Node $j$ in cluster $c$}
\end{equation}
where $a_{ct}$ is the cluster activation level at time interval $t$; $N_c$ is the total number of CBLA Nodes in cluster $c$; $\overline{m_{jt}}$ is the average output value of CBLA Node $j$ at time interval $t$.

Similarly, we can calculate the average cluster activation level during the period between $t_{trig}$ and $t_{readj}$ as followed.

\begin{equation}\label{eqn:average_cluster_activation}
\overline{a_c} = \frac{1}{| \left\{ a_{cT_{trig}}, ... , a_{cT_{readj}} \right\}|} \sum_{t=T_{trig}}^{T_{readj}} a_{ct}
\end{equation}
where $\overline{a_c}$ is the average cluster activation from $T_{trig}$ to $T_{readj}$; and $| \left\{ a_{cT_{trig}}, ..., a_{cT_{readj}} \right\}|$ is the number of time intervals between $T_{trig}$ and $T_{readj}$.

In this experiment, we set  $T_{readj}$ to $360s$. This means that we are looking at the behaviours of the system within 60 seconds from the trigger at $T_{trig} = 300s$.

\subsection{Results}

The average total activation and average cluster activation values for Spatial and Random Mode trials are listed in \Cref{table:multi-cluster-results-spatial,table:multi-cluster-results-random}. The mean of results from the each set of the three trials was used to interpret the results. 

\begin{table}[!htbp]
	\caption[Results of the multi-cluster experiment for Spatial Mode]{Results of the multi-cluster experiments for Spatial Mode. The average total activation ($\overline{a}$) and the average cluster activation for each cluster ($\overline{a_{c1}}$, $\overline{a_{c2}}$, $\overline{a_{c3}}$, and $\overline{a_{c4}}$) were computed from $T_{trig} = 300s$ to  $T_{readj} = 360s $.}
	\begin{center}
		\begin{tabular}{ | c | c | c | c | c | c |} 
			\hline
			\textbf{Trial \#} & \boldmath{$\overline{a}$}  & \boldmath{$\overline{a_{c1}}$}  & \boldmath{$\overline{a_{c2}}$} & \boldmath{$\overline{a_{c3}}$} & \boldmath{$\overline{a_{c4}}$} \\ 
			\hline
			\hline
			1 & 0.07209 & 0.06259 & 0.07982 & 0.09966 & 0.04629 \\
			\hline
			2 & 0.07306 & 0.08146 & 0.07130 & 0.08726 & 0.05219 \\
			\hline
			3 & 0.06915 & 0.08628 & 0.04721 & 0.08548 & 0.05761 \\
			\hlineB{3}	
			\textbf{Mean} & 0.07143	 & 0.07678 & 0.06611 & 0.09080 & 0.05203 \\
			\hline
			\textbf{Std. Dev.} & 0.00203 & 0.01251 & 0.01691 & 0.00772 & 0.00565 \\
			\hline			
		\end{tabular}
	\end{center}
	\label{table:multi-cluster-results-spatial}
\end{table}

\begin{table}[!htbp]
	\caption[Results of the multi-cluster experiment for Random Mode]{Results of the multi-cluster experiments for Random Mode. The average total activation ($\overline{a}$) and the average cluster activation for each cluster ($\overline{a_{c1}}$, $\overline{a_{c2}}$, $\overline{a_{c3}}$, and $\overline{a_{c4}}$) were computed from $T_{trig} = 300s$ to  $T_{readj} = 360s$. }
	\begin{center}
		\begin{tabular}{ | c | c | c | c | c | c |} 
			\hline
			\textbf{Trial \#} & \boldmath{$\overline{a}$}  & \boldmath{$\overline{a_{c1}}$}  & \boldmath{$\overline{a_{c2}}$} & \boldmath{$\overline{a_{c3}}$} & \boldmath{$\overline{a_{c4}}$} \\ 
			\hline
			\hline
			4 & 0.03297	& 0.04193 &	0.02686 & 0.02951 & 0.03358 \\
			\hline
			5 &	0.08062 & 0.08114 & 0.07884 & 0.08035 & 0.08218 \\
			\hline
			6 &	0.05953 & 0.06105 &	0.05732 & 0.06237 & 0.05737 \\
			\hlineB{3}	
			\textbf{Mean} & 0.07008	& 0.06137 &	0.05434	& 0.05741 & 0.05771  \\
			\hline
			\textbf{Std. Dev.} & 0.01491 & 0.01960 & 0.02611 & 0.02578 & 0.02429 \\
			\hline	
		\end{tabular}
	\end{center}
	\label{table:multi-cluster-results-random}
\end{table}

For both Spatial mode (Trial 1, 2, and 3) and Random Mode (Trial 4, 5, and 6), their average total activation values $\overline{a}$ were similar. It shows that the overall intensity of their activation levels are similar. However, it can be seen that the variance is much greater for Random Mode. The level of variation may be attributed to the fact that the links among its CBLA Nodes are different at every trial.

On the other hand, for Spatial Mode, the average cluster activation values for Cluster 3 is larger than the other Clusters. Cluster 3 is where the trigger took place in the experiment. While for Random Mode, they are relatively consistent. This show that activation does tend to concentrate around the origin of the trigger in Spatial Mode as expected. Also as expected, the level of activation among its different Clusters is relatively even for Random Mode. 

The total activation and the cluster activations over time plots for trial~2 (Spatial Mode) are shown in \Cref{fig:multi-cluster-results-spatial-2}. At the point at $t = 300s$ when the an object was presented in front of a sensor at in Cluster~3, the activation level at Cluster shot up and the activation levels in the other three clusters trails after as expected. Furthermore, it is interesting to point out the magnitudes of activation for the other clusters are actually similar or higher than Cluster 3. This means that CBLA Nodes in a cluster would also respond to an event happening in a neighbouring cluster with the same level of intensity although the timing would be delayed.

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/cbla_spatial_global_2015-11-16_14-33-11 - Metrics"}
	\caption[Average total activation and average cluster activations over time plots for trial 2 (Spatial Mode) of the multi-cluster experiment]{Average total activation and average cluster activations over time plots for trial 2 (Spatial Mode) of the multi-cluster experiment. For the Cluster Activation plot (bottom), the blue line represents Cluster 1; the green line represents Cluster 2; the red line represents Cluster 3; and the cyan line represents Cluster 4.}
	\label{fig:multi-cluster-results-spatial-2}
\end{figure}

In contrast, in the total activation and the cluster activations over time plots for trial~5 (Random Mode) shown in \Cref{fig:multi-cluster-results-random-2}, the activation levels across different clusters are relatively even and without much delays. This is also expected since the CBLA Nodes are linked randomly, there is no expectation that CBLA Nodes in one Cluster should activate earlier than another.

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/cbla_random_2015-11-16_15-14-04 - Metrics"}
	\caption[Average total activation and average cluster activations over time plots for trial 5 (Random Mode) of the multi-cluster experiment]{Average total activation and average cluster activations over time plots for trial 5 (Random Mode) of the multi-cluster experiment. For the Cluster Activation plot (bottom), the blue line represents Cluster 1; the green line represents Cluster 2; the red line represents Cluster 3; and the cyan line represents Cluster 4.}
	\label{fig:multi-cluster-results-random-2}
\end{figure}

\subsection{Discussions}

In this experiment, we showed that activation in response to a triggering event is more likely to begin and concentrate near source of the trigger when the network is configured as Spatial Mode. Since we believe that user will find activations in close proximity to be more relevant and interesting, Spatial Mode seems to be a more promising network configuration. Therefore, in the User Study described in \Cref{sec:user-study}, the CBLA system would be configured under Spatial Mode. 

Another observation we made in the experiment was that there seems to be some periodic spontaneous activations for either network configurations. For example, in both \Cref{fig:multi-cluster-results-spatial-2,fig:multi-cluster-results-random-2}, there were activation at around 100s to 200s points, even when there was not any external interference. In fact, over a long period of time, a self activation pattern becomes evident as shown in \Cref{fig:multi-cluster experiment cyclic activation} where the system was run in Spatial mode for 4500s uninterrupted. The CBLA Nodes activated spontaneously at a relatively consistent rate despite the absence of any external triggering events. 

\begin{figure} [!htbp]
	\centering
	\includegraphics[width=1.0\textwidth]{"fig/validations/multi-cluster experiment cyclic activation"}
	\caption[Periodic spontaneous activation over a period of 4500s]{The CBLA system was running uninterrupted for 4500s under Spatial Mode. Even without external events, CBLA Nodes activates a relatively consistent rate.}
	\label{fig:multi-cluster experiment cyclic activation}
\end{figure}

As mentioned in \Cref{sec:action_selection}, this periodic activation pattern is caused by the way relative action value $\widehat{q^2_z}$ was calculated. Looking back at 
\Cref{eqn:relative_action_val}, \[\widehat{q^2_z} = \frac{q_t^2}{max(\overline{q^2_z}, \nu)}\] we can see that when the average squared action value $\overline{q^2_z}$ hovers close to 0 for a long time, relative action value $\widehat{q^2_z}$ would become very large. Fundamentally, this pattern is caused by the system's sensitivity to ambient sensor noise and can be adjusted by changing the sensitivity constant $\nu$. Although setting $\nu$ to a larger value can eliminate this periodic activation pattern, it will also make the sculpture less responsive to the user and to the external environment. In addition, we believe that this kind of behaviour can indeed be an interesting aspect of the behaviours of this interactive art sculpture. 


\section{User Study}\label{sec:user-study}

A curiosity-based learning algorithm (CBLA) is used on interactive art sculptures to automatically generate interactive behaviours. This study aims to determine whether the behaviours generated through this method can make the experience of interacting with the sculptures more interesting, compared with pre-scripted behaviours. Simply put, we would like to test whether behaviours generated using the CBLA are more interesting than pre-scripted behaviours designed by human experts. The test subjects will report their level of interest at several points in time as they interact with sculpture, with the two versions of behaviours. Afterwards, a short survey will be given to assess the subjects' overall experience. The results of this study will enable designers to design more engaging and interesting interactive art sculptures. 

\subsection{Objectives}
This study will test the efficacy of increasing users' interest level in an interactive art sculpture, by using a curiosity-based learning algorithm (CBLA) to adjust the sculpture's dynamic behaviours. 

\subsubsection{Research Questions}
\begin{enumerate}
	\item Does the use of the CBLA increase user's interest level over pre-scripted behaviours?
	\item Do people perceive CBLA as non-random?
	\item Are certain behaviours  more interesting than others?
\end{enumerate}


\subsubsection{Hypotheses}
\begin{enumerate}
	\item The CBLA works by continuously generating new behaviours in order to improve its internal mathematical model of the sculpture and its sensed environment. The behaviours are adaptive and analogous to how animals and human beings learn. It is hypothesized that the user will find this kind of behaviour more interesting than pre-programmed behaviours.
	\item Although the CBLA continuously generates new behaviours, it is not random. We hypothesize that the users will not perceive the CBLA-generated behaviours as random. 
	\item We hypothesize that users will categorize some types of behaviours as being more interesting than others. 
\end{enumerate}

\subsection{Set-up}

The TestBed is same as what described in the Multi-Cluster Experiment in Section \ref{sec:multi-cluster-setup}. The floor will be lined with a grid numbered from 1 to 12 and 

\subsection{Procedures}

\subsubsection{At the beginning of the study}

Test participants will be invited to interact with an interactive art sculpture that will be
installed in the Toronto studio of Philip Beesley Architect Inc. (PBAI). Participants of this study will be informed about the procedures of the study and be asked to sign the consent forms before they are allowed to participate in the study. (Though they may visit and interact with the sculpture whether they choose to participate in the study or not).

After that, each participant will be given an envelope and a stack of 8 identical business-
card-sized questionnaires. 

%TODO include picture of the card

\subsubsection{During the study}

Test participants will be free to roam around the space and interact with the art sculpture. A tone will go off periodically at a 2.5 minute interval. When the tones goes off, each participant will take out an empty questionnaire card from the envelope, and answer the questions on the card. The experiment will go on for 20 minutes which is equivalent to 8 cards. 

There are two versions of the interactive behaviours: a pre-scripted version and a CBLA
version. The participants will not be informed about which version of the behaviours they
were interacting with nor the fact that there are two different version of the interactive
behaviours. 

On the card, the participant will write down the location of that they are standing, how interesting they think the sculpture is, and what number they were at. This help us to correlate their level of interest to the state of of sculpture.

Participants will not include any identifying information on the questionnaire cards, and will not be required to complete all the cards. They may choose to cease their participation at any time, and may decide themselves whether to submit any completed cards to the researchers.

\subsubsection{At the end of the study}

If returning questionnaire cards, participants will place their cards in the envelope and return it to the researcher. Participants will then be asked if they would fill out an exit questionnaire before they leave the venue. Each participant will have the right to leave the study and withdraw all data collected from him or her at any time before he or she has submitted the questionnaires and signed the consent forms. 

Whether or not participants agree to the exit questionnaire, they will be provided with
information about the learning algorithm in form of a debriefing letter, and the version of
interactive behaviours that they were interacting with will be revealed verbally after all
questionnaires and surveys have been collected.

\subsection{Results Analysis}

\subsubsection{Overall Interest Level}
The survey data show thatt there's no significant between CBLA and Prescripte.
However the only significant is when Prescripted is on after Prescripted seems to be more interesting
 
\subsubsection{Responsiveness}

\subsubsection{Correlation: Activation level vs Interest LEvel}

\subsubsection{Correlation: Activation Type vs Interest Level}
\subsubsection{Correlation:Proximal activation vs interest level}



\subsection{Discussion}

different people interact with sculpture different and have different expectation
need different kinds of way to measure interest level. 



